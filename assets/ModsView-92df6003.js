import{_ as V,r as x,b as F,o as n,c as l,d as e,t as c,e as G,f as b,u as q,g as A,s as N,w as W,h as O,i as D,v as U,j as H,F as T,k as B,l as J,m as Q,n as X,p as Y,q as Z,x as ee,y as f,z as te,A as oe,B as se,C as j}from"./index-3517ed6f.js";import{_ as ne}from"./banana-8d4eada8.js";const ae={class:"mod-thumbnail"},le=["src","alt"],ie={key:1,class:"placeholder-thumbnail"},de={class:"mod-basic-info"},re={class:"mod-game"},ue={class:"mod-date"},me={key:0,class:"mod-preview"},ce={key:0,class:"preview-item"},ve={key:1,class:"preview-item"},fe={key:2,class:"preview-item"},pe=["innerHTML"],ge={__name:"ModCard",props:{mod:{type:Object,required:!0}},emits:["click"],setup(i){const h=i,o=x(!1),k=p=>p?new Date(p*1e3).toLocaleDateString():"Unknown date",y=F(()=>window.innerWidth<768),S=F(()=>{if(!h.mod.modDescription)return"";const p=h.mod.modDescription.replace(/<[^>]*>/g,"");return p.length<=120?h.mod.modDescription:p.substr(0,120).split(" ").slice(0,-1).join(" ")+"..."});return(p,u)=>(n(),l("div",{class:"mod-card aero-panel",onMouseenter:u[0]||(u[0]=m=>o.value=!0),onMouseleave:u[1]||(u[1]=m=>o.value=!1),onClick:u[2]||(u[2]=m=>p.$emit("click"))},[e("div",ae,[i.mod.thumbnail?(n(),l("img",{key:0,src:i.mod.thumbnail,alt:i.mod.modName},null,8,le)):(n(),l("div",ie,[e("span",null,c(i.mod.modName.charAt(0)),1)]))]),e("div",de,[e("h3",null,c(i.mod.modName),1),e("p",re,c(i.mod.game),1),e("p",ue,c(k(i.mod.publishDate)),1)]),o.value&&!y.value?(n(),l("div",me,[i.mod.modTargetDemon?(n(),l("div",ce,[u[3]||(u[3]=e("strong",null,"Replaces:",-1)),G(" "+c(i.mod.modTargetDemon),1)])):b("",!0),i.mod.modSeries?(n(),l("div",ve,[u[4]||(u[4]=e("strong",null,"Series:",-1)),G(" "+c(i.mod.modSeries),1)])):b("",!0),i.mod.modCommissioner?(n(),l("div",fe,[u[5]||(u[5]=e("strong",null,"Thanks to:",-1)),G(" "+c(i.mod.modCommissioner),1)])):b("",!0),e("div",{class:"preview-item mod-description",innerHTML:S.value},null,8,pe),u[6]||(u[6]=e("div",{class:"mod-click-hint"},[e("span",null,"Click for details")],-1))])):b("",!0)],32))}},ye=V(ge,[["__scopeId","data-v-7f22a1bd"]]);const be={class:"mod-filters aero-panel"},he={class:"search-bar"},ke={class:"filter-grid"},_e={class:"filter-group"},Se=["value"],we={class:"filter-group date-filter"},De={class:"filter-group date-filter"},$e={__name:"ModFilters",emits:["apply-filters","reset-filters"],setup(i,{emit:h}){const o=h,k=q(),y=A(),{uniqueSeries:S}=N(k),{filters:p}=N(y),u=F(()=>S.value),m=x({search:"",game:"",series:"",dateFrom:null,dateTo:null}),C=F({get:()=>m.value.dateFrom?m.value.dateFrom.toISOString().substring(0,10):"",set:t=>{m.value.dateFrom=t?new Date(t):null}}),_=F({get:()=>m.value.dateTo?m.value.dateTo.toISOString().substring(0,10):"",set:t=>{m.value.dateTo=t?new Date(t):null}});W(()=>p.value,t=>{m.value={...t}},{deep:!0}),O(()=>{m.value={...p.value}});function $(){Object.keys(m.value).forEach(t=>{y.setFilter(t,m.value[t])}),o("apply-filters")}function v(){y.resetFilters(),m.value={...p.value},o("reset-filters")}return(t,d)=>(n(),l("div",be,[e("div",he,[D(e("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=r=>m.value.search=r),placeholder:"Search mods...",class:"aero-input"},null,512),[[U,m.value.search]])]),e("div",ke,[e("div",_e,[d[5]||(d[5]=e("label",{for:"series-filter"},"Series:",-1)),D(e("select",{id:"series-filter","onUpdate:modelValue":d[1]||(d[1]=r=>m.value.series=r),class:"aero-select"},[d[4]||(d[4]=e("option",{value:""},"All Series",-1)),(n(!0),l(T,null,B(u.value,r=>(n(),l("option",{key:r,value:r},c(r),9,Se))),128))],512),[[H,m.value.series]])]),e("div",we,[d[6]||(d[6]=e("label",{for:"date-from"},"From:",-1)),D(e("input",{type:"date",id:"date-from","onUpdate:modelValue":d[2]||(d[2]=r=>C.value=r),class:"aero-input date-input"},null,512),[[U,C.value]])]),e("div",De,[d[7]||(d[7]=e("label",{for:"date-to"},"To:",-1)),D(e("input",{type:"date",id:"date-to","onUpdate:modelValue":d[3]||(d[3]=r=>_.value=r),class:"aero-input date-input"},null,512),[[U,_.value]])])]),e("div",{class:"filter-actions"},[e("button",{class:"aero-button reset-button",onClick:v}," Reset Filters "),e("button",{class:"glossy-button",onClick:$}," Apply Filters ")])]))}},Me=V($e,[["__scopeId","data-v-e2a8ff84"]]);const Fe={class:"modal-container aero-glass"},Ce={class:"modal-content"},Ge={class:"mod-header"},Te={class:"text-shadow"},Be={class:"mod-meta"},xe={class:"mod-game"},Ne={class:"mod-date"},Ve={key:0,class:"mod-badge spicy"},Le={class:"mod-content"},Ue={class:"mod-main-info"},He={class:"mod-thumbnail"},Oe=["src","alt"],Re={key:1,class:"placeholder-thumbnail"},je={class:"mod-details"},qe={key:0,class:"detail-item"},Ae={key:1,class:"detail-item"},Ee={key:2,class:"detail-item"},Ie=["innerHTML"],ze={class:"mod-download"},Ke={key:0,class:"download-group"},Pe=["href"],We={key:1,class:"download-group"},Je=["href"],Qe={key:2,class:"download-group"},Xe=["href"],Ye={key:3,class:"no-downloads"},Ze={__name:"ModModal",props:{mod:{type:Object,required:!0}},emits:["close"],setup(i,{emit:h}){const o=i;O(()=>{console.log("Mod data structure:",o.mod),console.log("Has modSiteData?",!!o.mod.modSiteData),o.mod.modSiteData&&console.log("Has GameBanana data?",!!o.mod.modSiteData.GameBanana),window.addEventListener("keydown",$),document.body.style.overflow="hidden"}),J(()=>{window.removeEventListener("keydown",$),document.body.style.overflow=""});const k=h,y=()=>{k("close")},S=v=>v?new Date(v*1e3).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"Unknown date",p=()=>{var v,t,d,r,w;return!!((t=(v=o.mod.modSiteData)==null?void 0:v.GameBanana)!=null&&t.itemUrl||(r=(d=o.mod.modSiteData)==null?void 0:d.GameBanana)!=null&&r.id&&/^\d{5,}$/.test(o.mod.modSiteData.GameBanana.id.toString())||o.mod.modDescription&&/https?:\/\/gamebanana\.com\/mods\/\d+/i.test(o.mod.modDescription)||o.mod.id&&/^\d{5,}$/.test(o.mod.id)&&((w=o.mod.modSiteData)!=null&&w.GameBanana))},u=()=>{var v,t,d,r,w;if((t=(v=o.mod.modSiteData)==null?void 0:v.GameBanana)!=null&&t.itemUrl)return o.mod.modSiteData.GameBanana.itemUrl;if((r=(d=o.mod.modSiteData)==null?void 0:d.GameBanana)!=null&&r.id&&/^\d{5,}$/.test(o.mod.modSiteData.GameBanana.id.toString()))return`https://gamebanana.com/mods/${o.mod.modSiteData.GameBanana.id}`;if(o.mod.modDescription){const M=o.mod.modDescription.match(/https?:\/\/gamebanana\.com\/mods\/\d+/i);if(M&&M.length>0)return M[0]}return o.mod.id&&/^\d{5,}$/.test(o.mod.id)&&((w=o.mod.modSiteData)!=null&&w.GameBanana)?`https://gamebanana.com/mods/${o.mod.id}`:"#"},m=()=>{var v,t;return!!((t=(v=o.mod.modSiteData)==null?void 0:v.GitHub)!=null&&t.links)&&Object.keys(o.mod.modSiteData.GitHub.links).length>0},C=()=>m()?Object.entries(o.mod.modSiteData.GitHub.links).map(([v,t])=>({name:v.replace(/\[.*?\]/g,"").replace(/#\d+#\d+$/,"").replace(/_/g," "),url:t})):[],_=F(()=>o.mod.mirrors&&Object.keys(o.mod.mirrors).length>0),$=v=>{v.key==="Escape"&&y()};return(v,t)=>(n(),l("div",{class:"modal-backdrop",onClick:Q(y,["self"])},[e("div",Fe,[e("button",{class:"close-button",onClick:y},t[0]||(t[0]=[e("span",null,"Ã—",-1)])),e("div",Ce,[e("div",Ge,[e("h2",Te,c(i.mod.modName),1),e("div",Be,[e("span",xe,c(i.mod.game),1),e("span",Ne,c(S(i.mod.publishDate)),1),i.mod.isSpicy?(n(),l("span",Ve,"Spicy")):b("",!0)])]),e("div",Le,[e("div",Ue,[e("div",He,[i.mod.thumbnail?(n(),l("img",{key:0,src:i.mod.thumbnail,alt:i.mod.modName},null,8,Oe)):(n(),l("div",Re,[e("span",null,c(i.mod.modName.charAt(0)),1)]))]),e("div",je,[i.mod.modTargetDemon?(n(),l("div",qe,[t[1]||(t[1]=e("strong",null,"Replaces:",-1)),G(" "+c(i.mod.modTargetDemon),1)])):b("",!0),i.mod.modSeries?(n(),l("div",Ae,[t[2]||(t[2]=e("strong",null,"Series:",-1)),G(" "+c(i.mod.modSeries),1)])):b("",!0),i.mod.modCommissioner?(n(),l("div",Ee,[t[3]||(t[3]=e("strong",null,"Thanks to:",-1)),G(" "+c(i.mod.modCommissioner),1)])):b("",!0),e("div",{class:"detail-item mod-description",innerHTML:i.mod.modDescription},null,8,Ie)])]),e("div",ze,[t[9]||(t[9]=e("h3",null,"Download Links",-1)),p()?(n(),l("div",Ke,[t[5]||(t[5]=e("h4",null,"GameBanana",-1)),e("a",{href:u(),target:"_blank",class:"download-button"},t[4]||(t[4]=[e("img",{src:ne,alt:"GameBanana",class:"site-icon"},null,-1),e("span",null,"View on GameBanana",-1)]),8,Pe)])):b("",!0),m()?(n(),l("div",We,[t[6]||(t[6]=e("h4",null,"GitHub Direct Links",-1)),(n(!0),l(T,null,B(C(),d=>(n(),l("a",{key:d.name,href:d.url,target:"_blank",class:"download-button github-button"},[e("span",null,c(d.name),1)],8,Je))),128))])):b("",!0),_.value?(n(),l("div",Qe,[t[7]||(t[7]=e("h4",null,"Mirror Links",-1)),(n(!0),l(T,null,B(i.mod.mirrors,(d,r)=>(n(),l("a",{key:r,href:d,target:"_blank",class:"download-button"},[e("span",null,c(r),1)],8,Xe))),128))])):b("",!0),!_.value&&!p()?(n(),l("div",Ye,t[8]||(t[8]=[e("p",null,"No download links available for this mod.",-1)]))):b("",!0)])])])])]))}},et=V(Ze,[["__scopeId","data-v-57ebabcd"]]);const tt={class:"mods-view"},ot={class:"top-controls aero-panel"},st={class:"filter-group sort-control"},nt=["value"],at={class:"filter-group game-filter"},lt=["value"],it={class:"spicy-toggle"},dt={class:"toggle-label"},rt={class:"toggle-text"},ut={key:0,class:"loading-state aero-panel"},mt={key:1,class:"error-state aero-panel"},ct={key:2,class:"no-results aero-panel"},vt={key:3,class:"mods-grid"},ft={__name:"ModsView",setup(i){const h=x(!1),o=X(),k=Y(),y=q(),{isLoading:S,error:p,activeMod:u,sortOptions:m,uniqueGames:C}=N(y),{fetchMods:_,setActiveMod:$,clearActiveMod:v,setSortOrder:t}=y,d=x(y.sortOrder),r=A(),{filteredMods:w}=N(r),{resetFilters:M,loadFromUrl:E,updateUrl:R,setFilter:pt}=r,I=F(()=>{const g=[...w.value];switch(d.value){case"newest":return g.sort((s,a)=>a.publishDate-s.publishDate);case"oldest":return g.sort((s,a)=>s.publishDate-a.publishDate);case"az":return g.sort((s,a)=>s.modName.localeCompare(a.modName));case"za":return g.sort((s,a)=>a.modName.localeCompare(s.modName));case"id_asc":return g.sort((s,a)=>Number(s.id)-Number(a.id));case"id_desc":return g.sort((s,a)=>Number(a.id)-Number(s.id));default:return g}});O(async()=>{r.filters.showSpicy=!1;try{const g=await fetch("https://ipapi.co/json/");if(g.ok){const s=await g.json();s.country_code&&s.country_code!=="BR"&&(r.filters.showSpicy=!0)}}catch{}y.mods.length===0&&await _(),o.params.id&&$(o.params.id),E(o)}),Z(()=>{S.value||R(k)});function L(){R(k)}function z(){t(d.value);const g={...o.query,sort:d.value};k.replace({query:g})}function K(g){$(g),k.push({name:"mod-detail",params:{id:g},query:o.query})}function P(){v(),k.push({name:"mods",query:o.query})}return ee(()=>{v()}),(g,s)=>(n(),l("div",tt,[s[12]||(s[12]=e("h2",{class:"text-shadow"},"Mods Catalog",-1)),e("div",ot,[e("div",st,[s[6]||(s[6]=e("label",{for:"sort-select"},"Sort by:",-1)),D(e("select",{id:"sort-select","onUpdate:modelValue":s[0]||(s[0]=a=>d.value=a),class:"aero-select",onChange:z},[(n(!0),l(T,null,B(f(m),a=>(n(),l("option",{key:a.value,value:a.value},c(a.label),9,nt))),128))],544),[[H,d.value]])]),e("div",at,[s[8]||(s[8]=e("label",{for:"game-filter"},"Game:",-1)),D(e("select",{id:"game-filter","onUpdate:modelValue":s[1]||(s[1]=a=>f(r).filters.game=a),class:"aero-select",onChange:L},[s[7]||(s[7]=e("option",{value:""},"All Games",-1)),(n(!0),l(T,null,B(f(C),a=>(n(),l("option",{key:a,value:a},c(a==="Shin Megami Tensei V"?"SMTV":a==="Shin Megami Tensei V: Vengeance"?"SMT5V":a),9,lt))),128))],544),[[H,f(r).filters.game]])]),e("div",it,[e("label",dt,[D(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=a=>f(r).filters.showSpicy=a),class:"toggle-checkbox",onChange:L},null,544),[[te,f(r).filters.showSpicy]]),s[9]||(s[9]=e("span",{class:"toggle-switch"},null,-1)),e("span",rt,c(f(r).filters.showSpicy?"Include Spicy":"Family Friendly"),1)])]),e("button",{class:"filter-toggle aero-button glossy-button",onClick:s[3]||(s[3]=a=>h.value=!h.value)},c(h.value?"Hide Filters":"Show Filters"),1)]),D(se(Me,{class:"mods-filters",onApplyFilters:L,onResetFilters:f(M)},null,8,["onResetFilters"]),[[oe,h.value]]),f(S)?(n(),l("div",ut,s[10]||(s[10]=[e("p",null,"Loading mods catalog...",-1)]))):f(p)?(n(),l("div",mt,[e("p",null,"Error loading mods: "+c(f(p)),1),e("button",{class:"glossy-button",onClick:s[4]||(s[4]=(...a)=>f(_)&&f(_)(...a))},"Retry")])):f(w).length===0?(n(),l("div",ct,[s[11]||(s[11]=e("p",null,"No mods found matching your filters. Try adjusting your search criteria.",-1)),e("button",{class:"glossy-button",onClick:s[5]||(s[5]=(...a)=>f(M)&&f(M)(...a))},"Reset Filters")])):(n(),l("div",vt,[(n(!0),l(T,null,B(I.value,a=>(n(),j(ye,{key:a.id,mod:a,onClick:gt=>K(a.id)},null,8,["mod","onClick"]))),128))])),f(u)?(n(),j(et,{key:4,mod:f(u),onClose:P},null,8,["mod"])):b("",!0)]))}},ht=V(ft,[["__scopeId","data-v-876c684a"]]);export{ht as default};
