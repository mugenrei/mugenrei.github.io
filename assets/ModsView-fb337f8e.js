import{_ as G,r as B,b as D,o as a,c as l,d as e,t as v,e as F,f as _,u as j,g as E,s as x,w as W,h as q,i as $,v as U,j as L,F as C,k as T,l as J,m as Q,n as X,p as Y,q as Z,x as ee,y as p,z as te,A as oe,B as se,C as R}from"./index-bc0b487c.js";import{_ as ne}from"./banana-8d4eada8.js";const ae={class:"mod-thumbnail"},le=["src","alt"],de={key:1,class:"placeholder-thumbnail"},ie={class:"mod-basic-info"},re={class:"mod-game"},me={class:"mod-date"},ue={key:0,class:"mod-preview"},ce={key:0,class:"preview-item"},ve={key:1,class:"preview-item"},fe={key:2,class:"preview-item"},pe=["innerHTML"],ge={__name:"ModCard",props:{mod:{type:Object,required:!0}},emits:["click"],setup(n){const b=n,t=B(!1),S=g=>g?new Date(g*1e3).toLocaleDateString():"Unknown date",y=D(()=>window.innerWidth<768),w=D(()=>{if(!b.mod.modDescription)return"";const g=b.mod.modDescription.replace(/<[^>]*>/g,"");return g.length<=120?b.mod.modDescription:g.substr(0,120).split(" ").slice(0,-1).join(" ")+"..."});return(g,r)=>(a(),l("div",{class:"mod-card aero-panel",onMouseenter:r[0]||(r[0]=m=>t.value=!0),onMouseleave:r[1]||(r[1]=m=>t.value=!1),onClick:r[2]||(r[2]=m=>g.$emit("click"))},[e("div",ae,[n.mod.thumbnail?(a(),l("img",{key:0,src:n.mod.thumbnail,alt:n.mod.modName},null,8,le)):(a(),l("div",de,[e("span",null,v(n.mod.modName.charAt(0)),1)]))]),e("div",ie,[e("h3",null,v(n.mod.modName),1),e("p",re,v(n.mod.game),1),e("p",me,v(S(n.mod.publishDate)),1)]),t.value&&!y.value?(a(),l("div",ue,[n.mod.modTargetDemon?(a(),l("div",ce,[r[3]||(r[3]=e("strong",null,"Replaces:",-1)),F(" "+v(n.mod.modTargetDemon),1)])):_("",!0),n.mod.modSeries?(a(),l("div",ve,[r[4]||(r[4]=e("strong",null,"Series:",-1)),F(" "+v(n.mod.modSeries),1)])):_("",!0),n.mod.modCommissioner?(a(),l("div",fe,[r[5]||(r[5]=e("strong",null,"Thanks to:",-1)),F(" "+v(n.mod.modCommissioner),1)])):_("",!0),e("div",{class:"preview-item mod-description",innerHTML:w.value},null,8,pe),r[6]||(r[6]=e("div",{class:"mod-click-hint"},[e("span",null,"Click for details")],-1))])):_("",!0)],32))}},ye=G(ge,[["__scopeId","data-v-7f22a1bd"]]);const he={class:"mod-filters aero-panel"},be={class:"search-bar"},ke={class:"filter-grid"},_e={class:"filter-group"},Se=["value"],we={class:"filter-group date-filter"},$e={class:"filter-group date-filter"},Me={__name:"ModFilters",emits:["apply-filters","reset-filters"],setup(n,{emit:b}){const t=b,S=j(),y=E(),{uniqueSeries:w}=x(S),{filters:g}=x(y),r=D(()=>w.value),m=B({search:"",game:"",series:"",dateFrom:null,dateTo:null}),M=D({get:()=>m.value.dateFrom?m.value.dateFrom.toISOString().substring(0,10):"",set:c=>{m.value.dateFrom=c?new Date(c):null}}),f=D({get:()=>m.value.dateTo?m.value.dateTo.toISOString().substring(0,10):"",set:c=>{m.value.dateTo=c?new Date(c):null}});W(()=>g.value,c=>{m.value={...c}},{deep:!0}),q(()=>{m.value={...g.value}});function d(){Object.keys(m.value).forEach(c=>{y.setFilter(c,m.value[c])}),t("apply-filters")}function k(){y.resetFilters(),m.value={...g.value},t("reset-filters")}return(c,i)=>(a(),l("div",he,[e("div",be,[$(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=u=>m.value.search=u),placeholder:"Search mods...",class:"aero-input"},null,512),[[U,m.value.search]])]),e("div",ke,[e("div",_e,[i[5]||(i[5]=e("label",{for:"series-filter"},"Series:",-1)),$(e("select",{id:"series-filter","onUpdate:modelValue":i[1]||(i[1]=u=>m.value.series=u),class:"aero-select"},[i[4]||(i[4]=e("option",{value:""},"All Series",-1)),(a(!0),l(C,null,T(r.value,u=>(a(),l("option",{key:u,value:u},v(u),9,Se))),128))],512),[[L,m.value.series]])]),e("div",we,[i[6]||(i[6]=e("label",{for:"date-from"},"From:",-1)),$(e("input",{type:"date",id:"date-from","onUpdate:modelValue":i[2]||(i[2]=u=>M.value=u),class:"aero-input date-input"},null,512),[[U,M.value]])]),e("div",$e,[i[7]||(i[7]=e("label",{for:"date-to"},"To:",-1)),$(e("input",{type:"date",id:"date-to","onUpdate:modelValue":i[3]||(i[3]=u=>f.value=u),class:"aero-input date-input"},null,512),[[U,f.value]])])]),e("div",{class:"filter-actions"},[e("button",{class:"aero-button reset-button",onClick:k}," Reset Filters "),e("button",{class:"glossy-button",onClick:d}," Apply Filters ")])]))}},De=G(Me,[["__scopeId","data-v-e2a8ff84"]]);const Fe={class:"modal-container aero-glass"},Ce={class:"modal-content"},Te={class:"mod-header"},Be={class:"text-shadow"},xe={class:"mod-meta"},Ge={class:"mod-game"},Ne={class:"mod-date"},Ve={key:0,class:"mod-badge spicy"},Ue={class:"mod-content"},Le={class:"mod-main-info"},qe={class:"mod-thumbnail"},Ae=["src","alt"],Oe={key:1,class:"placeholder-thumbnail"},Re={class:"mod-details"},je={key:0,class:"detail-item"},Ee={key:1,class:"detail-item"},He={key:2,class:"detail-item"},Ie=["innerHTML"],ze={class:"mod-download"},Ke={key:0,class:"download-group"},Pe=["href"],We={key:1,class:"download-group"},Je=["href"],Qe={key:2,class:"no-downloads"},Xe={__name:"ModModal",props:{mod:{type:Object,required:!0}},emits:["close"],setup(n,{emit:b}){const t=n;q(()=>{console.log("Mod data structure:",t.mod),console.log("Has modSiteData?",!!t.mod.modSiteData),t.mod.modSiteData&&console.log("Has GameBanana data?",!!t.mod.modSiteData.GameBanana),window.addEventListener("keydown",M),document.body.style.overflow="hidden"}),J(()=>{window.removeEventListener("keydown",M),document.body.style.overflow=""});const S=b,y=()=>{S("close")},w=f=>f?new Date(f*1e3).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"Unknown date",g=()=>{var f,d,k,c,i;return!!((d=(f=t.mod.modSiteData)==null?void 0:f.GameBanana)!=null&&d.itemUrl||(c=(k=t.mod.modSiteData)==null?void 0:k.GameBanana)!=null&&c.id&&/^\d{5,}$/.test(t.mod.modSiteData.GameBanana.id.toString())||t.mod.modDescription&&/https?:\/\/gamebanana\.com\/mods\/\d+/i.test(t.mod.modDescription)||t.mod.id&&/^\d{5,}$/.test(t.mod.id)&&((i=t.mod.modSiteData)!=null&&i.GameBanana))},r=()=>{var f,d,k,c,i;if((d=(f=t.mod.modSiteData)==null?void 0:f.GameBanana)!=null&&d.itemUrl)return t.mod.modSiteData.GameBanana.itemUrl;if((c=(k=t.mod.modSiteData)==null?void 0:k.GameBanana)!=null&&c.id&&/^\d{5,}$/.test(t.mod.modSiteData.GameBanana.id.toString()))return`https://gamebanana.com/mods/${t.mod.modSiteData.GameBanana.id}`;if(t.mod.modDescription){const u=t.mod.modDescription.match(/https?:\/\/gamebanana\.com\/mods\/\d+/i);if(u&&u.length>0)return u[0]}return t.mod.id&&/^\d{5,}$/.test(t.mod.id)&&((i=t.mod.modSiteData)!=null&&i.GameBanana)?`https://gamebanana.com/mods/${t.mod.id}`:"#"},m=D(()=>t.mod.mirrors&&Object.keys(t.mod.mirrors).length>0),M=f=>{f.key==="Escape"&&y()};return(f,d)=>(a(),l("div",{class:"modal-backdrop",onClick:Q(y,["self"])},[e("div",Fe,[e("button",{class:"close-button",onClick:y},d[0]||(d[0]=[e("span",null,"Ã—",-1)])),e("div",Ce,[e("div",Te,[e("h2",Be,v(n.mod.modName),1),e("div",xe,[e("span",Ge,v(n.mod.game),1),e("span",Ne,v(w(n.mod.publishDate)),1),n.mod.isSpicy?(a(),l("span",Ve,"Spicy")):_("",!0)])]),e("div",Ue,[e("div",Le,[e("div",qe,[n.mod.thumbnail?(a(),l("img",{key:0,src:n.mod.thumbnail,alt:n.mod.modName},null,8,Ae)):(a(),l("div",Oe,[e("span",null,v(n.mod.modName.charAt(0)),1)]))]),e("div",Re,[n.mod.modTargetDemon?(a(),l("div",je,[d[1]||(d[1]=e("strong",null,"Replaces:",-1)),F(" "+v(n.mod.modTargetDemon),1)])):_("",!0),n.mod.modSeries?(a(),l("div",Ee,[d[2]||(d[2]=e("strong",null,"Series:",-1)),F(" "+v(n.mod.modSeries),1)])):_("",!0),n.mod.modCommissioner?(a(),l("div",He,[d[3]||(d[3]=e("strong",null,"Thanks to:",-1)),F(" "+v(n.mod.modCommissioner),1)])):_("",!0),e("div",{class:"detail-item mod-description",innerHTML:n.mod.modDescription},null,8,Ie)])]),e("div",ze,[d[8]||(d[8]=e("h3",null,"Download Links",-1)),g()?(a(),l("div",Ke,[d[5]||(d[5]=e("h4",null,"GameBanana",-1)),e("a",{href:r(),target:"_blank",class:"download-button"},d[4]||(d[4]=[e("img",{src:ne,alt:"GameBanana",class:"site-icon"},null,-1),e("span",null,"View on GameBanana",-1)]),8,Pe)])):_("",!0),m.value?(a(),l("div",We,[d[6]||(d[6]=e("h4",null,"Mirror Links",-1)),(a(!0),l(C,null,T(n.mod.mirrors,(k,c)=>(a(),l("a",{key:c,href:k,target:"_blank",class:"download-button"},[e("span",null,v(c),1)],8,Je))),128))])):_("",!0),!m.value&&!g()?(a(),l("div",Qe,d[7]||(d[7]=[e("p",null,"No download links available for this mod.",-1)]))):_("",!0)])])])])]))}},Ye=G(Xe,[["__scopeId","data-v-c17324b4"]]);const Ze={class:"mods-view"},et={class:"top-controls aero-panel"},tt={class:"filter-group sort-control"},ot=["value"],st={class:"filter-group game-filter"},nt=["value"],at={class:"spicy-toggle"},lt={class:"toggle-label"},dt={class:"toggle-text"},it={key:0,class:"loading-state aero-panel"},rt={key:1,class:"error-state aero-panel"},mt={key:2,class:"no-results aero-panel"},ut={key:3,class:"mods-grid"},ct={__name:"ModsView",setup(n){const b=B(!1),t=X(),S=Y(),y=j(),{isLoading:w,error:g,activeMod:r,sortOptions:m,uniqueGames:M}=x(y),{fetchMods:f,setActiveMod:d,clearActiveMod:k,setSortOrder:c}=y,i=B(y.sortOrder),u=E(),{filteredMods:A}=x(u),{resetFilters:N,loadFromUrl:H,updateUrl:O,setFilter:vt}=u,I=D(()=>{const h=[...A.value];switch(i.value){case"newest":return h.sort((o,s)=>s.publishDate-o.publishDate);case"oldest":return h.sort((o,s)=>o.publishDate-s.publishDate);case"az":return h.sort((o,s)=>o.modName.localeCompare(s.modName));case"za":return h.sort((o,s)=>s.modName.localeCompare(o.modName));case"id_asc":return h.sort((o,s)=>Number(o.id)-Number(s.id));case"id_desc":return h.sort((o,s)=>Number(s.id)-Number(o.id));default:return h}});q(async()=>{y.mods.length===0&&await f(),t.params.id&&d(t.params.id),H(t)}),Z(()=>{w.value||O(S)});function V(){O(S)}function z(){c(i.value);const h={...t.query,sort:i.value};S.replace({query:h})}function K(h){d(h),S.push({name:"mod-detail",params:{id:h},query:t.query})}function P(){k(),S.push({name:"mods",query:t.query})}return ee(()=>{k()}),(h,o)=>(a(),l("div",Ze,[o[12]||(o[12]=e("h2",{class:"text-shadow"},"Mods Catalog",-1)),e("div",et,[e("div",tt,[o[6]||(o[6]=e("label",{for:"sort-select"},"Sort by:",-1)),$(e("select",{id:"sort-select","onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),class:"aero-select",onChange:z},[(a(!0),l(C,null,T(p(m),s=>(a(),l("option",{key:s.value,value:s.value},v(s.label),9,ot))),128))],544),[[L,i.value]])]),e("div",st,[o[8]||(o[8]=e("label",{for:"game-filter"},"Game:",-1)),$(e("select",{id:"game-filter","onUpdate:modelValue":o[1]||(o[1]=s=>p(u).filters.game=s),class:"aero-select",onChange:V},[o[7]||(o[7]=e("option",{value:""},"All Games",-1)),(a(!0),l(C,null,T(p(M),s=>(a(),l("option",{key:s,value:s},v(s==="Shin Megami Tensei V"?"SMTV":s==="Shin Megami Tensei V: Vengeance"?"SMT5V":s),9,nt))),128))],544),[[L,p(u).filters.game]])]),e("div",at,[e("label",lt,[$(e("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=s=>p(u).filters.showSpicy=s),class:"toggle-checkbox",onChange:V},null,544),[[te,p(u).filters.showSpicy]]),o[9]||(o[9]=e("span",{class:"toggle-switch"},null,-1)),e("span",dt,v(p(u).filters.showSpicy?"Include Spicy":"Family Friendly"),1)])]),e("button",{class:"filter-toggle aero-button glossy-button",onClick:o[3]||(o[3]=s=>b.value=!b.value)},v(b.value?"Hide Filters":"Show Filters"),1)]),$(se(De,{class:"mods-filters",onApplyFilters:V,onResetFilters:p(N)},null,8,["onResetFilters"]),[[oe,b.value]]),p(w)?(a(),l("div",it,o[10]||(o[10]=[e("p",null,"Loading mods catalog...",-1)]))):p(g)?(a(),l("div",rt,[e("p",null,"Error loading mods: "+v(p(g)),1),e("button",{class:"glossy-button",onClick:o[4]||(o[4]=(...s)=>p(f)&&p(f)(...s))},"Retry")])):p(A).length===0?(a(),l("div",mt,[o[11]||(o[11]=e("p",null,"No mods found matching your filters. Try adjusting your search criteria.",-1)),e("button",{class:"glossy-button",onClick:o[5]||(o[5]=(...s)=>p(N)&&p(N)(...s))},"Reset Filters")])):(a(),l("div",ut,[(a(!0),l(C,null,T(I.value,s=>(a(),R(ye,{key:s.id,mod:s,onClick:ft=>K(s.id)},null,8,["mod","onClick"]))),128))])),p(r)?(a(),R(Ye,{key:4,mod:p(r),onClose:P},null,8,["mod"])):_("",!0)]))}},yt=G(ct,[["__scopeId","data-v-4cf015b9"]]);export{yt as default};
