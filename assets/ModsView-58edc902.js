import{_ as L,r as x,d as C,o as a,c as d,a as e,e as c,b as G,f as b,u as j,g as E,s as N,w as J,h as q,i as D,v as H,j as O,F as T,k as B,l as Q,m as X,t as I,n as Y,p as Z,q as ee,x as te,y as v,z as oe,A as se,B as ne,C as R}from"./index-ac7b2938.js";import{_ as ae}from"./banana-8d4eada8.js";const le={class:"mod-thumbnail"},de=["src","alt"],ie={key:1,class:"placeholder-thumbnail"},re={class:"mod-basic-info"},ue={class:"mod-game"},me={class:"mod-date"},ce={key:0,class:"mod-preview"},ve={key:0,class:"preview-item"},fe={key:1,class:"preview-item"},pe={key:2,class:"preview-item"},ge=["innerHTML"],ye={__name:"ModCard",props:{mod:{type:Object,required:!0}},emits:["click"],setup(i){const h=i,o=x(!1),k=f=>f?new Date(f*1e3).toLocaleDateString():"Unknown date",p=C(()=>window.innerWidth<768),_=C(()=>{if(!h.mod.modDescription)return"";const f=h.mod.modDescription.replace(/<[^>]*>/g,"");return f.length<=120?h.mod.modDescription:f.substr(0,120).split(" ").slice(0,-1).join(" ")+"..."});return(f,u)=>(a(),d("div",{class:"mod-card aero-panel",onMouseenter:u[0]||(u[0]=m=>o.value=!0),onMouseleave:u[1]||(u[1]=m=>o.value=!1),onClick:u[2]||(u[2]=m=>f.$emit("click"))},[e("div",le,[i.mod.thumbnail?(a(),d("img",{key:0,src:i.mod.thumbnail,alt:i.mod.modName},null,8,de)):(a(),d("div",ie,[e("span",null,c(i.mod.modName.charAt(0)),1)]))]),e("div",re,[e("h3",null,c(i.mod.modName),1),e("p",ue,c(i.mod.game),1),e("p",me,c(k(i.mod.publishDate)),1)]),o.value&&!p.value?(a(),d("div",ce,[i.mod.modTargetDemon?(a(),d("div",ve,[u[3]||(u[3]=e("strong",null,"Replaces:",-1)),G(" "+c(i.mod.modTargetDemon),1)])):b("",!0),i.mod.modSeries?(a(),d("div",fe,[u[4]||(u[4]=e("strong",null,"Series:",-1)),G(" "+c(i.mod.modSeries),1)])):b("",!0),i.mod.modCommissioner?(a(),d("div",pe,[u[5]||(u[5]=e("strong",null,"Thanks to:",-1)),G(" "+c(i.mod.modCommissioner),1)])):b("",!0),e("div",{class:"preview-item mod-description",innerHTML:_.value},null,8,ge),u[6]||(u[6]=e("div",{class:"mod-click-hint"},[e("span",null,"Click for details")],-1))])):b("",!0)],32))}},be=L(ye,[["__scopeId","data-v-7f22a1bd"]]);const he={class:"mod-filters aero-panel"},ke={class:"search-bar"},we={class:"filter-grid"},Se={class:"filter-group"},_e=["value"],Me={class:"filter-group date-filter"},De={class:"filter-group date-filter"},$e={__name:"ModFilters",emits:["apply-filters","reset-filters"],setup(i,{emit:h}){const o=h,k=j(),p=E(),{uniqueSeries:_}=N(k),{filters:f}=N(p),u=C(()=>_.value),m=x({search:"",game:"",series:"",dateFrom:null,dateTo:null}),F=C({get:()=>m.value.dateFrom?m.value.dateFrom.toISOString().substring(0,10):"",set:r=>{m.value.dateFrom=r?new Date(r):null}}),S=C({get:()=>m.value.dateTo?m.value.dateTo.toISOString().substring(0,10):"",set:r=>{m.value.dateTo=r?new Date(r):null}});J(()=>f.value,r=>{m.value={...r}},{deep:!0}),q(()=>{m.value={...f.value}});function $(){Object.keys(m.value).forEach(r=>{p.setFilter(r,m.value[r])}),o("apply-filters")}function M(){p.resetFilters(),m.value={...f.value},o("reset-filters")}return(r,t)=>(a(),d("div",he,[e("div",ke,[D(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>m.value.search=n),placeholder:"Search mods...",class:"aero-input"},null,512),[[H,m.value.search]])]),e("div",we,[e("div",Se,[t[5]||(t[5]=e("label",{for:"series-filter"},"Series:",-1)),D(e("select",{id:"series-filter","onUpdate:modelValue":t[1]||(t[1]=n=>m.value.series=n),class:"aero-select"},[t[4]||(t[4]=e("option",{value:""},"All Series",-1)),(a(!0),d(T,null,B(u.value,n=>(a(),d("option",{key:n,value:n},c(n),9,_e))),128))],512),[[O,m.value.series]])]),e("div",Me,[t[6]||(t[6]=e("label",{for:"date-from"},"From:",-1)),D(e("input",{type:"date",id:"date-from","onUpdate:modelValue":t[2]||(t[2]=n=>F.value=n),class:"aero-input date-input"},null,512),[[H,F.value]])]),e("div",De,[t[7]||(t[7]=e("label",{for:"date-to"},"To:",-1)),D(e("input",{type:"date",id:"date-to","onUpdate:modelValue":t[3]||(t[3]=n=>S.value=n),class:"aero-input date-input"},null,512),[[H,S.value]])])]),e("div",{class:"filter-actions"},[e("button",{class:"aero-button reset-button",onClick:M}," Reset Filters "),e("button",{class:"glossy-button",onClick:$}," Apply Filters ")])]))}},Ce=L($e,[["__scopeId","data-v-e2a8ff84"]]);const Fe={class:"modal-container aero-glass"},Ge={class:"modal-content"},Te={class:"mod-header"},Be={class:"text-shadow"},Ve={class:"mod-meta"},xe={class:"mod-game"},Ne={class:"mod-date"},Le={key:0,class:"mod-badge spicy"},Ue={class:"mod-content"},He={class:"mod-main-info"},Oe={class:"mod-thumbnail"},qe=["src","alt"],Ae={key:1,class:"placeholder-thumbnail"},Re={class:"mod-details"},je={key:0,class:"detail-item"},Ee={key:1,class:"detail-item"},Ie={key:2,class:"detail-item"},ze=["innerHTML"],Ke={class:"mod-download"},Pe={key:0,class:"download-group"},We=["href"],Je={key:1,class:"download-group"},Qe=["href","onMousedown"],Xe={key:2,class:"download-group"},Ye=["href","onMousedown"],Ze={key:3,class:"no-downloads"},et={__name:"ModModal",props:{mod:{type:Object,required:!0}},emits:["close"],setup(i,{emit:h}){const o=i;q(()=>{console.log("Mod data structure:",o.mod),console.log("Has modSiteData?",!!o.mod.modSiteData),o.mod.modSiteData&&console.log("Has GameBanana data?",!!o.mod.modSiteData.GameBanana),window.addEventListener("keydown",$),document.body.style.overflow="hidden"}),Q(()=>{window.removeEventListener("keydown",$),document.body.style.overflow=""});const k=h,p=()=>{k("close")},_=r=>r?new Date(r*1e3).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"Unknown date",f=()=>{var r,t,n,g,w;return!!((t=(r=o.mod.modSiteData)==null?void 0:r.GameBanana)!=null&&t.itemUrl||(g=(n=o.mod.modSiteData)==null?void 0:n.GameBanana)!=null&&g.id&&/^\d{5,}$/.test(o.mod.modSiteData.GameBanana.id.toString())||o.mod.modDescription&&/https?:\/\/gamebanana\.com\/mods\/\d+/i.test(o.mod.modDescription)||o.mod.id&&/^\d{5,}$/.test(o.mod.id)&&((w=o.mod.modSiteData)!=null&&w.GameBanana))},u=()=>{var r,t,n,g,w;if((t=(r=o.mod.modSiteData)==null?void 0:r.GameBanana)!=null&&t.itemUrl)return o.mod.modSiteData.GameBanana.itemUrl;if((g=(n=o.mod.modSiteData)==null?void 0:n.GameBanana)!=null&&g.id&&/^\d{5,}$/.test(o.mod.modSiteData.GameBanana.id.toString()))return`https://gamebanana.com/mods/${o.mod.modSiteData.GameBanana.id}`;if(o.mod.modDescription){const V=o.mod.modDescription.match(/https?:\/\/gamebanana\.com\/mods\/\d+/i);if(V&&V.length>0)return V[0]}return o.mod.id&&/^\d{5,}$/.test(o.mod.id)&&((w=o.mod.modSiteData)!=null&&w.GameBanana)?`https://gamebanana.com/mods/${o.mod.id}`:"#"},m=()=>{var r,t;return!!((t=(r=o.mod.modSiteData)==null?void 0:r.GitHub)!=null&&t.links)&&Object.keys(o.mod.modSiteData.GitHub.links).length>0},F=()=>m()?Object.entries(o.mod.modSiteData.GitHub.links).map(([r,t])=>({name:r.replace(/\[.*?\]/g,"").replace(/#\d+#\d+$/,"").replace(/_/g," "),url:t})):[],S=C(()=>o.mod.mirrors&&Object.keys(o.mod.mirrors).length>0),$=r=>{r.key==="Escape"&&p()},M=(r,t,n)=>{I({type:"downloadClick",modId:o.mod.id,source:t,name:n})};return(r,t)=>(a(),d("div",{class:"modal-backdrop",onClick:X(p,["self"])},[e("div",Fe,[e("button",{class:"close-button",onClick:p},t[1]||(t[1]=[e("span",null,"Ã—",-1)])),e("div",Ge,[e("div",Te,[e("h2",Be,c(i.mod.modName),1),e("div",Ve,[e("span",xe,c(i.mod.game),1),e("span",Ne,c(_(i.mod.publishDate)),1),i.mod.isSpicy?(a(),d("span",Le,"Spicy")):b("",!0)])]),e("div",Ue,[e("div",He,[e("div",Oe,[i.mod.thumbnail?(a(),d("img",{key:0,src:i.mod.thumbnail,alt:i.mod.modName},null,8,qe)):(a(),d("div",Ae,[e("span",null,c(i.mod.modName.charAt(0)),1)]))]),e("div",Re,[i.mod.modTargetDemon?(a(),d("div",je,[t[2]||(t[2]=e("strong",null,"Replaces:",-1)),G(" "+c(i.mod.modTargetDemon),1)])):b("",!0),i.mod.modSeries?(a(),d("div",Ee,[t[3]||(t[3]=e("strong",null,"Series:",-1)),G(" "+c(i.mod.modSeries),1)])):b("",!0),i.mod.modCommissioner?(a(),d("div",Ie,[t[4]||(t[4]=e("strong",null,"Thanks to:",-1)),G(" "+c(i.mod.modCommissioner),1)])):b("",!0),e("div",{class:"detail-item mod-description",innerHTML:i.mod.modDescription},null,8,ze)])]),e("div",Ke,[t[10]||(t[10]=e("h3",null,"Download Links",-1)),f()?(a(),d("div",Pe,[t[6]||(t[6]=e("h4",null,"GameBanana",-1)),e("a",{href:u(),target:"_blank",class:"download-button",onMousedown:t[0]||(t[0]=n=>M(n,"gamebanana","View on GameBanana"))},t[5]||(t[5]=[e("img",{src:ae,alt:"GameBanana",class:"site-icon"},null,-1),e("span",null,"View on GameBanana",-1)]),40,We)])):b("",!0),m()?(a(),d("div",Je,[t[7]||(t[7]=e("h4",null,"GitHub Direct Links",-1)),(a(!0),d(T,null,B(F(),n=>(a(),d("a",{key:n.name,href:n.url,target:"_blank",class:"download-button github-button",onMousedown:g=>M(g,"github",n.name)},[e("span",null,c(n.name),1)],40,Qe))),128))])):b("",!0),S.value?(a(),d("div",Xe,[t[8]||(t[8]=e("h4",null,"Mirror Links",-1)),(a(!0),d(T,null,B(i.mod.mirrors,(n,g)=>(a(),d("a",{key:g,href:n,target:"_blank",class:"download-button",onMousedown:w=>M(w,"mirror",g)},[e("span",null,c(g),1)],40,Ye))),128))])):b("",!0),!S.value&&!f()?(a(),d("div",Ze,t[9]||(t[9]=[e("p",null,"No download links available for this mod.",-1)]))):b("",!0)])])])])]))}},tt=L(et,[["__scopeId","data-v-b76f736f"]]);const ot={class:"mods-view"},st={class:"top-controls aero-panel"},nt={class:"filter-group sort-control"},at=["value"],lt={class:"filter-group game-filter"},dt=["value"],it={class:"spicy-toggle"},rt={class:"toggle-label"},ut={class:"toggle-text"},mt={key:0,class:"loading-state aero-panel"},ct={key:1,class:"error-state aero-panel"},vt={key:2,class:"no-results aero-panel"},ft={key:3,class:"mods-grid"},pt={__name:"ModsView",setup(i){const h=x(!1),o=Y(),k=Z(),p=j(),{isLoading:_,error:f,activeMod:u,sortOptions:m,uniqueGames:F}=N(p),{fetchMods:S,setActiveMod:$,clearActiveMod:M,setSortOrder:r}=p,t=x(p.sortOrder),n=E(),{filteredMods:g}=N(n),{resetFilters:w,loadFromUrl:V,updateUrl:A,setFilter:gt}=n,z=C(()=>{const y=[...g.value];switch(t.value){case"newest":return y.sort((s,l)=>l.publishDate-s.publishDate);case"oldest":return y.sort((s,l)=>s.publishDate-l.publishDate);case"az":return y.sort((s,l)=>s.modName.localeCompare(l.modName));case"za":return y.sort((s,l)=>l.modName.localeCompare(s.modName));case"id_asc":return y.sort((s,l)=>Number(s.id)-Number(l.id));case"id_desc":return y.sort((s,l)=>Number(l.id)-Number(s.id));default:return y}});q(async()=>{n.filters.showSpicy=!1,p.mods.length===0&&await S(),o.params.id&&$(o.params.id),V(o)}),ee(()=>{_.value||A(k)});function U(){A(k)}function K(){r(t.value);const y={...o.query,sort:t.value};k.replace({query:y})}function P(y){$(y),I({type:"modView",modId:y}),k.push({name:"mod-detail",params:{id:y},query:o.query})}function W(){M(),k.push({name:"mods",query:o.query})}return te(()=>{M()}),(y,s)=>(a(),d("div",ot,[s[12]||(s[12]=e("h2",{class:"text-shadow"},"Mods Catalog",-1)),e("div",st,[e("div",nt,[s[6]||(s[6]=e("label",{for:"sort-select"},"Sort by:",-1)),D(e("select",{id:"sort-select","onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l),class:"aero-select",onChange:K},[(a(!0),d(T,null,B(v(m),l=>(a(),d("option",{key:l.value,value:l.value},c(l.label),9,at))),128))],544),[[O,t.value]])]),e("div",lt,[s[8]||(s[8]=e("label",{for:"game-filter"},"Game:",-1)),D(e("select",{id:"game-filter","onUpdate:modelValue":s[1]||(s[1]=l=>v(n).filters.game=l),class:"aero-select",onChange:U},[s[7]||(s[7]=e("option",{value:""},"All Games",-1)),(a(!0),d(T,null,B(v(F),l=>(a(),d("option",{key:l,value:l},c(l==="Shin Megami Tensei V"?"SMTV":l==="Shin Megami Tensei V: Vengeance"?"SMT5V":l),9,dt))),128))],544),[[O,v(n).filters.game]])]),e("div",it,[e("label",rt,[D(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=l=>v(n).filters.showSpicy=l),class:"toggle-checkbox",onChange:U},null,544),[[oe,v(n).filters.showSpicy]]),s[9]||(s[9]=e("span",{class:"toggle-switch"},null,-1)),e("span",ut,c(v(n).filters.showSpicy?"Include Spicy":"Family Friendly"),1)])]),e("button",{class:"filter-toggle aero-button glossy-button",onClick:s[3]||(s[3]=l=>h.value=!h.value)},c(h.value?"Hide Filters":"Show Filters"),1)]),D(ne(Ce,{class:"mods-filters",onApplyFilters:U,onResetFilters:v(w)},null,8,["onResetFilters"]),[[se,h.value]]),v(_)?(a(),d("div",mt,s[10]||(s[10]=[e("p",null,"Loading mods catalog...",-1)]))):v(f)?(a(),d("div",ct,[e("p",null,"Error loading mods: "+c(v(f)),1),e("button",{class:"glossy-button",onClick:s[4]||(s[4]=(...l)=>v(S)&&v(S)(...l))},"Retry")])):v(g).length===0?(a(),d("div",vt,[s[11]||(s[11]=e("p",null,"No mods found matching your filters. Try adjusting your search criteria.",-1)),e("button",{class:"glossy-button",onClick:s[5]||(s[5]=(...l)=>v(w)&&v(w)(...l))},"Reset Filters")])):(a(),d("div",ft,[(a(!0),d(T,null,B(z.value,l=>(a(),R(be,{key:l.id,mod:l,onClick:yt=>P(l.id)},null,8,["mod","onClick"]))),128))])),v(u)?(a(),R(tt,{key:4,mod:v(u),onClose:W},null,8,["mod"])):b("",!0)]))}},kt=L(pt,[["__scopeId","data-v-faf61335"]]);export{kt as default};
